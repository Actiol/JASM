<?xml version="1.0" encoding="utf-8" ?>
<Page
    x:Class="GIMI_ModManager.WinUI.Views.PresetPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="using:GIMI_ModManager.WinUI.Views"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:viewModels="using:GIMI_ModManager.WinUI.ViewModels"
    mc:Ignorable="d">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <Grid>

            <Grid.ColumnDefinitions>
                <ColumnDefinition />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <StackPanel Orientation="Horizontal">
                <Button Content="Save active mod preferences (KeySwaps)" IsEnabled="False" />
                <Button Content="Apply saved mod preferences (KeySwaps" IsEnabled="False" />
                <Button Content="Randomize Mods" IsEnabled="False" />
                <Button Content="3Dmigoto reload config" IsEnabled="False" />
            </StackPanel>
            <ProgressRing Grid.Column="1" IsActive="{x:Bind ViewModel.IsBusy, Mode=OneWay}" />
        </Grid>


        <TextBlock Grid.Row="1" Text="Mod Presets" />


        <Grid Grid.Row="2">

            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition />
            </Grid.RowDefinitions>
            <StackPanel>
                <TextBox Header="Preset Name" Text="{x:Bind ViewModel.NewPresetNameInput, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                <StackPanel Orientation="Horizontal">
                    <Button Command="{x:Bind ViewModel.CreatePresetCommand}" Content="Save as new preset" />
                    <CheckBox Content="Create as an empty preset" IsChecked="{x:Bind ViewModel.CreateEmptyPresetInput, Mode=TwoWay}" />
                </StackPanel>
            </StackPanel>

            <ListView
                Grid.Row="1"
                AllowDrop="True"
                CanReorderItems="True"
                ItemsSource="{x:Bind ViewModel.Presets}"
                SelectionMode="None">
                <ListView.ItemTemplate>
                    <DataTemplate x:DataType="viewModels:ModPresetVm">
                        <Grid
                            Margin="0,8"
                            Padding="8"
                            BorderBrush="{ThemeResource AccentFillColorSelectedTextBackgroundBrush}"
                            BorderThickness="4"
                            CornerRadius="12">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>

                            <StackPanel>
                                <TextBlock IsTextSelectionEnabled="True" Text="{x:Bind Name}" />
                                <Button
                                    Command="{x:Bind ApplyPresetCommand}"
                                    CommandParameter="{Binding}"
                                    Content="Apply Preset" />

                            </StackPanel>

                            <DropDownButton Grid.Column="1" AutomationProperties.Name="Email">
                                <DropDownButton.Content>
                                    <FontIcon Glyph="&#xE712;" />
                                </DropDownButton.Content>
                                <DropDownButton.Flyout>
                                    <MenuFlyout Placement="Bottom">
                                        <MenuFlyoutItem Text="Rename">
                                            <MenuFlyoutItem.Icon>
                                                <FontIcon Glyph="&#xE8AC;" />
                                            </MenuFlyoutItem.Icon>
                                        </MenuFlyoutItem>
                                        <MenuFlyoutItem
                                            Command="{x:Bind DuplicatePresetCommand}"
                                            CommandParameter="{Binding}"
                                            Text="Duplicate">
                                            <MenuFlyoutItem.Icon>
                                                <FontIcon Glyph="&#xEA35;" />
                                            </MenuFlyoutItem.Icon>
                                        </MenuFlyoutItem>
                                        <MenuFlyoutItem
                                            Command="{x:Bind DeletePresetCommand}"
                                            CommandParameter="{Binding}"
                                            Text="Delete">
                                            <MenuFlyoutItem.Icon>
                                                <FontIcon Glyph="&#xE74D;" />
                                            </MenuFlyoutItem.Icon>
                                        </MenuFlyoutItem>
                                    </MenuFlyout>
                                </DropDownButton.Flyout>
                            </DropDownButton>
                        </Grid>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>

        </Grid>


    </Grid>
</Page>
